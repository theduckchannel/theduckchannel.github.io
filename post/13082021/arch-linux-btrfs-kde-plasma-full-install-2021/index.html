<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="The Duck Channel">
<meta name="description" content="The Duck Channel Vlog" />
<meta name="keywords" content="linux, arch linux, youtube, tutorial, linus tech tips, ubuntu, endeavouros, linux, Arch Linux, kernel" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://theduckchannel.github.io/post/13082021/arch-linux-btrfs-kde-plasma-full-install-2021/" />


    <title>
        
            Arch Linux Btrfs Kde Plasma Full Install [2021] :: The Duck Channel´s Site  — Hello Friend NG Theme
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://theduckchannel.github.io/main.031a8efc33f94f55a4071bf4e91596478a5809fc8c148fab113801189cfd2152.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://theduckchannel.github.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://theduckchannel.github.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://theduckchannel.github.io/favicon-16x16.png">
    <link rel="manifest" href="https://theduckchannel.github.io/site.webmanifest">
    <link rel="mask-icon" href="https://theduckchannel.github.io/safari-pinned-tab.svg" color="#1b1c1d">
    <link rel="shortcut icon" href="https://theduckchannel.github.io/favicon.ico">
    <meta name="msapplication-TileColor" content="#1b1c1d">
    <meta name="theme-color" content="#1b1c1d">



<meta itemprop="name" content="Arch Linux Btrfs Kde Plasma Full Install [2021]">
<meta itemprop="description" content="The Duck Channel Vlog"><meta itemprop="datePublished" content="2021-08-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-08-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="886"><meta itemprop="image" content="https://theduckchannel.github.io"/>
<meta itemprop="keywords" content="linux,Arch Linux,kernel," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://theduckchannel.github.io"/>

<meta name="twitter:title" content="Arch Linux Btrfs Kde Plasma Full Install [2021]"/>
<meta name="twitter:description" content="The Duck Channel Vlog"/>




    <meta property="og:title" content="Arch Linux Btrfs Kde Plasma Full Install [2021]" />
<meta property="og:description" content="The Duck Channel Vlog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://theduckchannel.github.io/post/13082021/arch-linux-btrfs-kde-plasma-full-install-2021/" /><meta property="og:image" content="https://theduckchannel.github.io"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-08-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-08-13T00:00:00+00:00" />







    <meta property="article:published_time" content="2021-08-13 00:00:00 &#43;0000 UTC" />









    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZG8XJ4C4Q"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-GZG8XJ4C4Q', { 'anonymize_ip': false });
}
</script>


    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://theduckchannel.github.io/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">&gt;</span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://theduckchannel.github.io/about/">About</a></li><li><a href="https://theduckchannel.github.io/posts/">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://theduckchannel.github.io/post/13082021/arch-linux-btrfs-kde-plasma-full-install-2021/">Arch Linux Btrfs Kde Plasma Full Install [2021]</a></h2>
            <h4>Published on: August 13, 2021</h4>

            
            
            

            <div class="post-content">
                
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/h5LX9Ilwp7M" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Hi all, in this video i will show how to full install Arch Linux
with BTRFS filesystem.</p>
<ol>
<li>The boot mode will be EFI.</li>
<li>I’m assuming you already have the usb stick with the Arch Linux ISO.</li>
<li>My internet is wired, so if you have wireless network, 
please go to the website that is in the description of 
this video and see the link to properly configure 
your network.</li>
<li>Kde Plasma will be Desktop Environment in this case.</li>
</ol>
<p>I hope you enjoy!</p>
<h1 id="links">Links</h1>
<ol>
<li><a href="https://archlinux.org/download/">Download the latest Arch Linux ISO</a></li>
<li><a href="https://btrfs.wiki.kernel.org/index.php/Manpage/btrfs(5)">Btrfs Mount Options</a></li>
<li><a href="https://wiki.archlinux.org/title/installation_guide#Connect_to_the_internet">Connect to the Internet - Arch Linux Wiki</a></li>
<li><a href="https://wiki.archlinux.org/title/KDE">Kde - Arch Linux Wiki</a></li>
<li><a href="https://github.com/ricardomv/snapper-gui">snapper-gui</a></li>
<li><a href="https://github.com/Jguer/yay">Yay</a></li>
</ol>
<p>#1. Pre-Install</p>
<p>##1.1 Set Keymap (Optional)</p>
<p>Default keymap is US which will fit most keyboards. 
However if you have a different keymap you can set it using
this command.</p>
<p>If you are not sure which keymap you have, 
you can list all keymaps with:</p>
<pre><code class="language-console" data-lang="console">$ localectl list-keymaps 
</code></pre><pre><code class="language-console" data-lang="console">$ loadkeys [keymap]
</code></pre><p>##1.2 Set Time</p>
<pre><code class="language-console" data-lang="console">$ timedatectl set-ntp true
</code></pre><p>##1.3 Reflector</p>
<p>This command is optional. However, it considerably 
increases the speed for downloading packages on 
the internet during installation.</p>
<p>You need change to your country and to a country 
closer to your.</p>
<p>I am live in Brazil, so first i choose Brazil and after
i put Colombia because closer.</p>
<p>To a list with countries type: reflector list-countries</p>
<pre><code class="language-console" data-lang="console">$ reflector --country Brazil,Colombia -f 12 -l 10 -n 12 \
--save /etc/pacman.d/mirrorlist --verbose
$ pacman -Syy
</code></pre><p>##1.3 Partitioning the Disk</p>
<p>I will create 3 partitions.</p>
<p>The scheme.</p>
<p>Folow the video&hellip;</p>
<pre><code class="language-console" data-lang="console">$ fdisk /dev/[device]
</code></pre><p>##1.4 Formatting</p>
<p>use mkfs.btrfs, mkfs.fat and mkswap.</p>
<pre><code class="language-console" data-lang="console">$ mkfs.fat -F32 /dev/sda1
$ mkswap /dev/sda2
$ mkfs.btrs /dev/sda3
</code></pre><p>#1.5 Creating Subvolumes and Mounting</p>
<p>First i mount /dev/sda3 and create subvolumes. After
umount and mount this partition with 
every subvolumes created.</p>
<pre><code class="language-console" data-lang="console">$ mount /dev/sda3 /mnt
$
$ btrfs su cr /mnt/@
$ btrfs su cr /mnt/@home
$ btrfs su cr /mnt/@var
$ btrfs su cr /mnt/@tmp
$ btrfs su cr /mnt/@snapshots
$
$ umount /mnt
$ mount -o noatime,compress=lzo,space_cache=v2,\
subvol=@ /dev/sda3 /mnt
$ mkdir -p /mnt/{boot/efi,home,var, tmp,.snapshots}
</code></pre><p>####Home</p>
<pre><code class="language-console" data-lang="console">$ mount -o noatime,compress=lzo,space_cache=v2,\
subvol=@home /dev/sda3 /mnt/home
</code></pre><p>####var</p>
<pre><code class="language-console" data-lang="console">$ mount -o subvol=@var /dev/sda3 /mnt/var
</code></pre><p>####tmp</p>
<pre><code class="language-console" data-lang="console">$ mount -o noatime,compress=lzo,space_cache=v2,\
subvol=@home /dev/sda3 /mnt/home
</code></pre><p>####Snapshots</p>
<pre><code class="language-console" data-lang="console">$ mount -o noatime,compress=lzo,space_cache=v2,\
subvol=@snapshots /dev/sda3 /mnt/.snapshots
</code></pre><p>###EFI</p>
<pre><code class="language-console" data-lang="console">$ mount /dev/sda1 /mnt/boot/efi
</code></pre><p>####Swap
$ swapon /dev/sda2
$ lsblk</p>
<pre><code>
#2. Install

2.2 Install the Base System
Take a look at the site in the description you need 
to add a package in this command. 
It will depend on the brand of your processor (AMD or Intel)

- For Intel Processor add intel-ucode package;
- For AMD Processor add amd-ucode package;


Press enter twice...

```console
$ pacstrap /mnt base base-devel linux \
linux-firmware vim btrfs-progs \
networkmanager network-manager-applet \
grub grub-btrfs efibootmgr linux-headers \
reflector rsync mtools net-tools os-prober dosfstools \
git snapper xdg-user-dirs
</code></pre><p>Press enter twice here..</p>
<p>#3. Config the System</p>
<p>##3.1 Generate fstab</p>
<pre><code class="language-console" data-lang="console">$ genfstab -U /mnt &gt;&gt; /mnt/etc/fstab 
$ cat /mnt/etc/fstab
</code></pre><p>##3.2 Chroot</p>
<pre><code class="language-console" data-lang="console">$  arch-chroot /mnt 
</code></pre><p>##3.3 Timezone</p>
<p>You can list all timezones with:</p>
<pre><code class="language-console" data-lang="console">$ timedatectl list-timezones
</code></pre><p>Replace region and city with your own timezone.</p>
<pre><code class="language-console" data-lang="console">$ ln -sf /usr/share/zoneinfo/Region/City /etc/localtime  
$ hwclock --systohc
</code></pre><p>##3.4 Localization
Edit /etc/locale.gen and uncomment your locale. After, generate the locales by running:</p>
<pre><code class="language-console" data-lang="console">$ locale-gen
</code></pre><p>Create the /etc/locale.conf and set the LANG variable:</p>
<pre><code class="language-console" data-lang="console">LANG=en_US.UTF-8   
</code></pre><p>If you changed your keymap in first step, 
you need to add it here also:
Create /etc/vconsole.conf with your keyboard layout:</p>
<pre><code class="language-console" data-lang="console">KEYMAP=[keymap]
</code></pre><p>##3.5 Network Config</p>
<p>Create /etc/hostname with the name your host:</p>
<pre><code class="language-console" data-lang="console">nameFromYourHost   
</code></pre><p>Create /etc/hosts:</p>
<pre><code class="language-console" data-lang="console">127.0.0.1   localhost
::1         localhost
127.0.0.1   nameFromYourHost.localdomain nameFromYourHost   
</code></pre><p>Enable Network Manager</p>
<pre><code class="language-console" data-lang="console">$ systemctl enable NetworkManager  
</code></pre><p>#3.6 Add btrfs module to mkinitcpio</p>
<pre><code class="language-console" data-lang="console">$ vim /etc/mkinitcpio.conf
$ mkinitcpio -p linux
</code></pre><p>And add btrfs on Modules list.
remove fsck on line . If you dont remove your efi 
partition you be corrupted because btrfs.</p>
<p>3.7 Install GRUB</p>
<pre><code class="language-console" data-lang="console">$ grub-install --target=x86_64-efi \
--efi-directory=/boot/efi \
--bootloader-id=GRUB

$ grub-mkconfig -o \
/boot/grub/grub.cfg  
</code></pre><p>3.8 Set the root Password</p>
<pre><code class="language-console" data-lang="console">$ passwd  
</code></pre><p>3.9 Exit, Umount and Reboot</p>
<pre><code class="language-console" data-lang="console">$ exit
$ umount -a
$ reboot  
</code></pre><p>#4. Post-Install</p>
<p>##4.1 Create a New User</p>
<pre><code class="language-console" data-lang="console">$ useradd -m -G wheel yourUsername
$ passwd yourUsername  
$ export EDITOR=vim
</code></pre><p>Edit /etc/sudoers run &ldquo;visudo&rdquo; and uncomment the following line:</p>
<pre><code class="language-console" data-lang="console">## Uncomment to allow members of group wheel to execute any command
%wheel ALL=(ALL) ALL   
</code></pre><pre><code class="language-console" data-lang="console">$ exit
</code></pre><p>##4.2 Install xorg</p>
<pre><code class="language-console" data-lang="console">$ sudo pacman -S xorg  
</code></pre><p>##4.2 Install the Display Manager</p>
<pre><code class="language-console" data-lang="console">$ sudo pacman -S sddm
$ sudo systemctl enable sddm
</code></pre><p>#4.3 Install Kde Plasma</p>
<p>I only press enter to confirm every dialogs. Be patient!</p>
<pre><code class="language-console" data-lang="console">$ sudo pacman -S plasma kde-applications firefox
</code></pre><p>#4.4 Reboot</p>
<pre><code class="language-console" data-lang="console">$ reboot  
</code></pre><p>#5. Snapper</p>
<p>You need remove this directory because 
snapper will create again.</p>
<pre><code class="language-console" data-lang="console">$ su
$ umount .snapshots
$ rm -rf /.snapshots
$ snapper -c root create-config /
$ btrfs subvolume delete /.snapshots
$ mkdir /.snapshots
$ mount -a
$ chmod 750 /.snapshots/
$ chmod a+rx /.snapshots
$ chown :duckchannel /.snapshots
</code></pre><pre><code class="language-console" data-lang="console">$ vim /etc/snapper/configs/root
</code></pre><p>And put your username in:</p>
<pre><code class="language-console" data-lang="console">ALLOW_USERS=&quot;[yourusername]&quot;
</code></pre><p>Change the folowing lines to:</p>
<pre><code class="language-console" data-lang="console">TIMELINE_LIMIT_HOURLY=&quot;5&quot;
TIMELINE_LIMIT_DAYLY=&quot;7&quot;
TIMELINE_LIMIT_WEEKLY=&quot;0&quot;
TIMELINE_LIMIT_MONTHLY=&quot;0&quot;
TIMELINE_LIMIT-YEARLY=&quot;0&quot;
</code></pre><p>See the site in description to get this git URL address.</p>
<pre><code class="language-console" data-lang="console">$ systemctl enable --now snapper-timeline.timer
$ systemctl enable --now snapper-cleanup.timer
$ exit
$ 
$ git clone https://aur.archlinux.org/yay.git
$ cd yay
$ makepkg -si
$ yay -Syu
$ yay -S snap-pac-grub snapper-gui
$ reboot
</code></pre><p>Make Grub-Btrfs Show Snapshots</p>
<pre><code class="language-console" data-lang="console">$ sudo systemctl enable --now grub-btrfs.path
</code></pre><h1 id="create-one-new-snapshot-with-snapper-gui">Create one new Snapshot with snapper-gui</h1>
<p>#6. Finish</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://theduckchannel.github.io/tags/linux/">linux</a></span>
        <span class="tag"><a href="https://theduckchannel.github.io/tags/arch-linux/">Arch Linux</a></span>
        <span class="tag"><a href="https://theduckchannel.github.io/tags/kernel/">kernel</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            <span><a href="https://theduckchannel.github.io">The Duck Channel</a></span>
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span><a href="https://theduckchannel.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span><span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="https://theduckchannel.github.io/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js" integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>



    </body>
</html>
